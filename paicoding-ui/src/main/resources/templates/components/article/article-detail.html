<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
  <!-- æ–‡ç« å†…å®¹ -->
  <section
    th:fragment="article_info(article, author, other)"
    class="article-info-wrap com-2-panel col-2-article J-articlePanel"
  >
    <span class="com-2-mark-triangle article-mark">
      <span class="mark-cnt">åŸåˆ›</span>
    </span>
    <div
      id="postsTitle"
      class="article-info-title"
      th:data-id="${article.articleId}"
      th:text="${article.title}"
    >
      æ ‡é¢˜
    </div>
    <div>
      <div class="detail-content-title-other-wrap relative" th:if="${author != null}">
        <img th:src="${author.photo}" class="detail-content-title-other-img" />
        <a
          th:href="${'/user/' + author.userId}"
          th:text="${author.userName}"
          class="detail-content-title-other-name"
        >
          ä½œè€…
        </a>

        <span
          th:text="${T(com.github.paicoding.forum.core.util.DateUtil).time2day(article.createTime)}"
          class="detail-content-title-other-time"
        >
          æ›´æ–°æ—¶é—´
        </span>
        <span th:text="'é˜…è¯» ' + ${article.count.readCount}">520</span>
        <span th:if="${article.status != 1}">
            <span th:text="${article.status == 0 ? '(è‰ç¨¿)' : '(å®¡æ ¸ä¸­)'}" style="padding-left: 1em; color: red"></span>
        </span>
        <div
          th:if="${global.isLogin && article.author == global.user.userId}"
          class="detail-content-title-edit"
        >
          <svg xmlns="http://www.w3.org/2000/svg" style="display:none;">
            <symbol id="edit-svg" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path class="cls-1" d="M9 1H3a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V7h-1v6a1 1 0 01-1 1H3a1 1 0 01-1-1V3a1 1 0 011-1h6V1z" />
              <path class="cls-1" d="M12 2.41L13.59 4l-6 6H6V8.41l6-6M12 1L5 8v3h3l7-7-3-3z" />
            </symbol>
          </svg>

          <svg xmlns="http://www.w3.org/2000/svg" style="display:none;">
            <symbol id="delete-svg" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path class="cls-1" d="M13 3h-2V1H5v2H2v1h1v9a2 2 0 002 2h6a2 2 0 002-2V4h1V3zM6 2h4v1H6zm5 12H5a1 1 0 01-1-1V4h8v9a1 1 0 01-1 1z" />
              <path class="cls-1" d="M6 6h1v6H6zm3 0h1v6H9z" />
            </symbol>
          </svg>

          <a th:href="${'/article/edit?articleId=' + article.articleId}" class="com-opt-link link-edit">
            <svg class="com-i-edit">
              <use xlink:href="#edit-svg"></use>
            </svg>ç¼–è¾‘
          </a>

          <a href="javascript:;" data-target="#deleteModal" data-toggle="modal" class="com-opt-link link-delete ml-3">
            <svg class="com-i-delete">
              <use xlink:href="#delete-svg"></use>
            </svg>åˆ é™¤
          </a>
        </div>
      </div>
    </div>

    <div id="articleContent" class="article-content" th:utext="${article.content}">
    </div>

    <!-- å·¦å³åˆ‡æ¢ -->
    <div class="article-change direction" th:if="${other.flip != null}">
      <a class="step-btn--prev"
         th:href="${other.flip.prevHref}"
         th:if="${other.flip.prevShow}"
      >
        <div class="article-change-item">
          <svg
                  t="1670064682276"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="9458"
                  width="32"
                  height="32"
          >
            <path
                    d="M671.968176 911.99957c-12.287381 0-24.576482-4.67206-33.951566-14.047144L286.048434 545.984249c-18.751888-18.719204-18.751888-49.12028 0-67.872168L638.016611 126.111222c18.751888-18.751888 49.12028-18.751888 67.872168 0 18.751888 18.719204 18.751888 49.12028 0 67.872168l-318.016611 318.047574L705.888778 830.047574c18.751888 18.751888 18.751888 49.12028 0 67.872168C696.544658 907.32751 684.255557 911.99957 671.968176 911.99957z"
                    p-id="9459"
                    fill="#ffffff"
            ></path>
          </svg>
        </div>
      </a>
      <a class="step-btn--next"
         th:href="${other.flip.nextHref}"
         th:if="${other.flip.nextShow}"
      >
        <div class="article-change-item">
          <svg
                  t="1670064662589"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="8352"
                  width="32"
                  height="32"
          >
            <path
                    d="M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z"
                    p-id="8353"
                    fill="#ffffff"
            ></path>
          </svg>
        </div>
      </a>
    </div>

    <div th:if="${other.readType == 1 && !global.isLogin}">
      <div class="needlock">
        <a class="btn-readmore no-login underline" data-target="#loginModal" data-toggle="modal">
          <span>ç™»å½•ä¹‹åå³å¯é˜…è¯»å…¨æ–‡</span>
        </a>
      </div>
    </div>

    <div th:if="${other.readType == 3 && !(global.user != null && global.user.starStatus.code == 2)}">
      <div class="needlock">
        <a class="btn-readmore no-login underline" href="#" target="_blank" data-target="#registerModal" data-toggle="modal">
          <H2>å·²åŠ å…¥äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒï¼Œå³åˆ»ç»‘å®šæ˜Ÿçƒç¼–å·è§£é”ğŸ”</H2>
        </a>
      </div>
    </div>

    <!-- æ˜Ÿçƒè¯¦æƒ…  -->
    <div class="modal fade"
            id="starModel"
            data-backdrop="static"
            data-keyboard="false"
            tabindex="-1"
            role="dialog"
            aria-labelledby="deleteModalDropLabel"
            aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <a href="https://t.zsxq.com/11YwgyGmC" target="_blank">
              <h5 class="modal-title" id="startModel">è¯¥æ–‡æ¡£ä»…ã€ŒäºŒå“¥ç¼–ç¨‹æ˜Ÿçƒã€çš„VIPç”¨æˆ·å¯è§</h5>
            </a>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div  class="content join-star">
              <p >äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒå†…å®¹åŒ…æ‹¬ï¼š</p>
              <p ><span class="category">1. ä»˜è´¹æ–‡æ¡£</span>: æŠ€æœ¯æ´¾ã€MYDB ç­‰é¡¹ç›®é…å¥—çš„ 120+ç¯‡æ•™ç¨‹æŸ¥çœ‹æƒé™</p>
              <p ><span class="category">2. é¢è¯•æŒ‡å—</span>: æ ¡æ‹›ã€ç¤¾æ‹›çš„ 40 ä¸‡+å­—é¢è¯•æ±‚èŒæ”»ç•¥</p>
              <p ><span class="category">3. æ™ºèƒ½åŠ©æ‰‹</span>: æ— é™æœŸä½¿ç”¨æ´¾èªæ˜ AI åŠ©æ‰‹ï¼Œå·²å¯¹æ¥è®¯é£æ˜Ÿç«å’Œ ChatGPTåŒé€šé“ï¼Œä¸ç”¨èŠ± 1 åˆ†é’±</p>
              <p ><span class="category">4. ä¸“å±é—®ç­”</span>: å‘äºŒå“¥ 1v1 å‘èµ·æé—®ï¼Œå†…å®¹ä¸é™äº offer é€‰æ‹©ã€å­¦ä¹ è·¯çº¿ã€èŒä¸šè§„åˆ’ç­‰</p>
              <p ><span class="category">5. ç®€å†ä¿®æ”¹</span>: æä¾›ç®€å†ä¿®æ”¹æœåŠ¡ï¼Œé™„èµ æ˜Ÿçƒ 100+ä¼˜è´¨ç®€å†æ¨¡æ¿å¯ä¾›å‚è€ƒ</p>
              <p ><span class="category">6. å­¦ä¹ ç¯å¢ƒ</span>: æ‰“é€ ä¸€ä¸ªæ²‰æµ¸å¼çš„å­¦ä¹ ç¯å¢ƒï¼Œæœ‰ä¸€ç§é«˜è€ƒå†²åˆºã€å¤§å­¦è€ƒç ”çš„æ°›å›´</p> <br >
              <img  src="https://cdn.tobebetterjavaer.com/paicoding/153ba04898384c0c6b03dfe6ce1cbe76.jpg" alt="äºŒå“¥çš„æ˜Ÿçƒ" style="cursor: zoom-in;width: 100%"> <br >
              <p >ã€‹æ­¥éª¤â‘ ï¼šå¾®ä¿¡æ‰«æä¸Šæ–¹äºŒç»´ç ï¼Œç‚¹å‡»ã€ŒåŠ å…¥çŸ¥è¯†æ˜Ÿçƒã€æŒ‰é’®</p>
              <p >ã€‹æ­¥éª¤â‘¡ï¼šè®¿é—®æ˜Ÿçƒç½®é¡¶å¸–çƒå‹å¿…çœ‹ï¼š
                <a class="underline" href="https://t.zsxq.com/11rEo9Pdu" target="_blank">https://t.zsxq.com/11rEo9Pdu</a>ï¼Œè·å–é¡¹ç›®é…å¥—æ–‡æ¡£çš„è¯­é›€è®¿é—®åœ°å€å’Œå¯†ç </p>
            </div>
          </div>
          <div class="modal-footer">
            <a href="#" data-target="#registerModal" data-toggle="modal" type="button" class="btn btn-primary" data-dismiss="modal">
              å·²åŠ å…¥æ˜Ÿçƒï¼Œç»‘å®šæ˜Ÿçƒç¼–å·
            </a>
          </div>
        </div>
      </div>
    </div>


    <!-- åˆ é™¤æ–‡ç« å†æ¬¡ç¡®è®¤ Modal -->
    <div class="modal fade"
            id="deleteModal"
            data-backdrop="static"
            data-keyboard="false"
            tabindex="-1"
            role="dialog"
            aria-labelledby="deleteModalDropLabel"
            aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteModalDropLabel">åˆ é™¤æé†’</h5>
            <button type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p th:text="${'ç¡®å®šåˆ é™¤ã€Š' + article.title + 'ã€‹å—'}">ç¡®å®šåˆ é™¤å—ï¼Ÿ</p>
          </div>
          <div class="modal-footer">
            <button id="deleteBtn" type="button" class="btn btn-primary">
              ç¡®å®š
            </button>
            <button type="button"
                    class="btn btn-secondary"
                    data-dismiss="modal">
              å–æ¶ˆ
            </button>
          </div>
        </div>
      </div>
    </div>

    <!--  ç‚¹èµæ”¾è¿™é‡Œ-->
    <div th:replace="components/article/praise :: praise(${article})"></div>
    <script th:inline="javascript">
      // åˆ é™¤æ–‡ç« 
      let id = [[${article.articleId}]]
      $('#deleteBtn').click(function () {
        get("/article/api/delete?articleId=" + id, {}, function (data) {
          // åˆ é™¤æ–‡ç« æˆåŠŸï¼Œè·³è½¬åˆ°é¦–é¡µ
          window.location.href = "/";
        });
      });

      // é«˜äº®ä»£ç 
      hljs.addPlugin({
        'after:highlightElement': ({ el, result }) => {
          // move the language from the result into the dataset
          el.setAttribute('lang', result.language);
          el.classList.add('copyable');

          // åˆ›å»ºå¤åˆ¶ä»£ç æŒ‰é’®
          const copyBtn = document.createElement('span');
          copyBtn.classList.add('copy-code-btn');
          copyBtn.textContent = 'å¤åˆ¶ä»£ç ';

          // å°†å¤åˆ¶ä»£ç æŒ‰é’®æ·»åŠ åˆ°ä»£ç å—å
          el.parentNode.insertBefore(copyBtn, el.nextSibling);
        }
      });
      hljs.highlightAll();

      const clipboard = new ClipboardJS('.copy-code-btn', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        // å¤åˆ¶æˆåŠŸ
        toastr.info("å¤åˆ¶æˆåŠŸ");
        e.clearSelection();
      });

      clipboard.on('error', function(e) {
        console.log('å¤åˆ¶å¤±è´¥');
      });

      // æ˜Ÿçƒæ–‡ç« çš„æƒé™æ§åˆ¶
      let loginRead = [[${other.readType}]];
      let user = [[${global.user}]];
      if (loginRead == 3) {
        console.log(loginRead, user)
        if (user == null) {
          // æœªåŠ å…¥æ˜Ÿçƒï¼Œå±•ç¤ºå¼¹çª—
          $('#starModel').modal('show');
        } else {
          if (user.starStatus == "FORMAL") {

          } else if(user.starStatus == "TRYING"){

          } else {
            $('#starModel').modal('show');
          }
        }
      }

    </script>
  </section>
</html>
